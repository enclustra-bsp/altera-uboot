# rescan MMC and load all the images from it
mmc rescan || exit;
load mmc 0 ${kernel_loadaddr} ${kernel_image} || exit;
load mmc 0 ${devicetree_loadaddr} ${devicetree_image} || exit;
load mmc 0 ${ramdisk_loadaddr} ${uramdisk_image} || exit;

# switch SD card to eMMC by setting EMMC_EN to 0
gpio clear 53;

# setup ramdisk bootargs
run ramdisk_args;

# attempt to boot
bootm ${kernel_loadaddr} ${ramdisk_loadaddr} ${devicetree_loadaddr};
